/*!
 * ImageSet (1.0.0-beta1)
 *
 * This script file is needed for lazyloading imagesets,
 * generated with ImageSet for Kirby and rendering placeholder
 * effeccts
 *
 * Copyright (c) 2016 Fabian Michael <hallo@fabianmichael.de>
 * @license SEE LICENSE IN license.md
 *
 * This script also includes:
 *
 *   StackBlur 0.6
 *   Copyright (c) 2010 Mario Klingemann <mario@quasimondo.com>
 *   https://github.com/Quasimondo/QuasimondoJS
 *
 *   lazysizes 2.0.7 (with "static-gecko-picture" plugin)
 *   Copyright (C) 2015 Alexander Farkas, released under MIT license
 *   https://github.com/aFarkas/lazysizes
 * 
 */
!function(e,t,n){"use strict";function a(e,t,n,a,i,o,s,l){var d=e.getContext("2d"),c=d.getImageData(t,n,a,i);c=r(c,o,s,l),d.putImageData(c,t,n)}function r(e,t,n,a){var r,i,s,l,d,c,u,f,g,m,h,v,p,b,z,A,y,C,E,x,w,L,N,S,M,B=e.data,O=e.width,R=e.height,W=t+t+1,I=O-1,T=R-1,D=t+1,_=D*(D+1)/2,P=new o,k=P;for(s=1;s<W;s++)k=k.next=new o,s==D&&(M=k);k.next=P;var q=null,H=null;for(u=c=0,i=0;i<R;i++){for(A=y=C=E=f=g=m=h=0,v=D*(x=B[c]),p=D*(w=B[c+1]),b=D*(L=B[c+2]),z=D*(N=B[c+3]),f+=_*x,g+=_*w,m+=_*L,h+=_*N,k=P,s=0;s<D;s++)k.r=x,k.g=w,k.b=L,k.a=N,k=k.next;for(s=1;s<D;s++)l=c+((I<s?I:s)<<2),f+=(k.r=x=B[l])*(S=D-s),g+=(k.g=w=B[l+1])*S,m+=(k.b=L=B[l+2])*S,h+=(k.a=N=B[l+3])*S,A+=x,y+=w,C+=L,E+=N,k=k.next;for(q=P,H=M,r=0;r<O;r++)B[c]=f*n>>a,B[c+1]=g*n>>a,B[c+2]=m*n>>a,B[c+3]=h*n>>a,f-=v,g-=p,m-=b,h-=z,v-=q.r,p-=q.g,b-=q.b,z-=q.a,l=u+((l=r+t+1)<I?l:I)<<2,A+=q.r=B[l],y+=q.g=B[l+1],C+=q.b=B[l+2],E+=q.a=B[l+3],f+=A,g+=y,m+=C,h+=E,q=q.next,v+=x=H.r,p+=w=H.g,b+=L=H.b,z+=N=H.a,A-=x,y-=w,C-=L,E-=N,H=H.next,c+=4;u+=O}for(r=0;r<O;r++){for(y=C=E=A=g=m=h=f=0,c=r<<2,v=D*(x=B[c]),p=D*(w=B[c+1]),b=D*(L=B[c+2]),z=D*(N=B[c+3]),f+=_*x,g+=_*w,m+=_*L,h+=_*N,k=P,s=0;s<D;s++)k.r=x,k.g=w,k.b=L,k.a=N,k=k.next;for(d=O,s=1;s<=t;s++)c=d+r<<2,f+=(k.r=x=B[c])*(S=D-s),g+=(k.g=w=B[c+1])*S,m+=(k.b=L=B[c+2])*S,h+=(k.a=N=B[c+3])*S,A+=x,y+=w,C+=L,E+=N,k=k.next,s<T&&(d+=O);for(c=r,q=P,H=M,i=0;i<R;i++)l=c<<2,B[l+3]=N=h*n>>a,N>0?(N=255/N,B[l]=(f*n>>a)*N,B[l+1]=(g*n>>a)*N,B[l+2]=(m*n>>a)*N):B[l]=B[l+1]=B[l+2]=0,f-=v,g-=p,m-=b,h-=z,v-=q.r,p-=q.g,b-=q.b,z-=q.a,l=r+((l=i+D)<T?l:T)*O<<2,f+=A+=q.r=B[l],g+=y+=q.g=B[l+1],m+=C+=q.b=B[l+2],h+=E+=q.a=B[l+3],q=q.next,v+=x=H.r,p+=w=H.g,b+=L=H.b,z+=N=H.a,A-=x,y-=w,C-=L,E-=N,H=H.next,c+=O}return e}function i(e,t,n,a,r,i,s,l){var d,c,u,f,g,m,h,v,p,b,z,A,y,C,E,x,w,L,N,S,M,B=e.getContext("2d"),O=B.getImageData(t,n,a,r),R=O.data,W=i+i+1,I=a-1,T=r-1,D=i+1,_=D*(D+1)/2,P=new o,k=P;for(u=1;u<W;u++)k=k.next=new o,u==D&&(M=k);k.next=P;var q=null,H=null;for(h=m=0,c=0;c<r;c++){for(C=E=x=v=p=b=0,z=D*(w=R[m]),A=D*(L=R[m+1]),y=D*(N=R[m+2]),v+=_*w,p+=_*L,b+=_*N,k=P,u=0;u<D;u++)k.r=w,k.g=L,k.b=N,k=k.next;for(u=1;u<D;u++)f=m+((I<u?I:u)<<2),v+=(k.r=w=R[f])*(S=D-u),p+=(k.g=L=R[f+1])*S,b+=(k.b=N=R[f+2])*S,C+=w,E+=L,x+=N,k=k.next;for(q=P,H=M,d=0;d<a;d++)R[m]=v*s>>l,R[m+1]=p*s>>l,R[m+2]=b*s>>l,v-=z,p-=A,b-=y,z-=q.r,A-=q.g,y-=q.b,f=h+((f=d+i+1)<I?f:I)<<2,C+=q.r=R[f],E+=q.g=R[f+1],x+=q.b=R[f+2],v+=C,p+=E,b+=x,q=q.next,z+=w=H.r,A+=L=H.g,y+=N=H.b,C-=w,E-=L,x-=N,H=H.next,m+=4;h+=a}for(d=0;d<a;d++){for(E=x=C=p=b=v=0,m=d<<2,z=D*(w=R[m]),A=D*(L=R[m+1]),y=D*(N=R[m+2]),v+=_*w,p+=_*L,b+=_*N,k=P,u=0;u<D;u++)k.r=w,k.g=L,k.b=N,k=k.next;for(g=a,u=1;u<=i;u++)m=g+d<<2,v+=(k.r=w=R[m])*(S=D-u),p+=(k.g=L=R[m+1])*S,b+=(k.b=N=R[m+2])*S,C+=w,E+=L,x+=N,k=k.next,u<T&&(g+=a);for(m=d,q=P,H=M,c=0;c<r;c++)f=m<<2,R[f]=v*s>>l,R[f+1]=p*s>>l,R[f+2]=b*s>>l,v-=z,p-=A,b-=y,z-=q.r,A-=q.g,y-=q.b,f=d+((f=c+D)<T?f:T)*a<<2,v+=C+=q.r=R[f],p+=E+=q.g=R[f+1],b+=x+=q.b=R[f+2],q=q.next,z+=w=H.r,A+=L=H.g,y+=N=H.b,C-=w,E-=L,x-=N,H=H.next,m+=a}B.putImageData(O,t,n)}function o(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}e.stackBlur={canvasRGB:i,canvasRGBA:a}}(window,document),function(e,t,n,a,r){"use strict";function i(e){"loading"!=t.readyState?e():t.addEventListener("DOMContentLoaded",e)}function o(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function s(e,t){var n=null;return function(){var a=this,r=arguments;clearTimeout(n),n=setTimeout(function(){e.apply(a,r)},t)}}function l(e,t,n){if(n=n||!1,e.complete&&void 0!==e.naturalWidth&&0!==e.naturalWidth)t();else{var a=function(){this.removeEventListener("load",a),t()};if(e.addEventListener("load",a),n){var r=new Image;r.addEventListener("error",function(){n()}),r.src=e.src}}}function d(t,n){var a=e.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||1,i=a/r;if(a!==r){var o=t.width,s=t.height;t.width=o*i,t.height=s*i,n.scale(i,i)}return i}function c(e){var t=e.className.match(M);return!!t&&t[1]}function u(e){N(e,b)}function f(){function n(){for(var e,t,n,i=0,o=r.length;i<o;i++)r[i]&&(t=r[i],L(t,p)||(e=c(t))&&B[e]&&(n=B[e](t),"async"===a.placeholderRendering?w.add(n):n()))}var a=e.imagesetConfig=o({autoUpdate:!0,placeholderRendering:"async"},e.imagesetConfig||{}),r=t.getElementsByClassName(v),l=s(n);return t.addEventListener("lazybeforeunveil",function(e){var n=e.target,a=n.parentNode;if(L(n,z)){for(;!L(a,g);)a=a.parentNode;var r=function(){n.removeEventListener("load",r),x(function(){N(a,m)})},i=function(){n.removeEventListener("error",i),x(function(){var e=t.createElement("span");N(e,y),n.hasAttribute("alt")&&""!==n.alt&&(e.setAttribute("aria-hidden",!0),e.appendChild(t.createTextNode(n.alt))),a.appendChild(e),x(function(){N(a,h)})})};n.addEventListener("load",r),n.addEventListener("error",i)}}),a.autoUpdate?(e.MutationObserver?new e.MutationObserver(l).observe(C,{childList:!0,subtree:!0,attributes:!1,characterData:!1}):(C.addEventListener("DOMNodeInserted",l,!0),C.addEventListener("DOMAttrModified",l,!0),setInterval(l,999)),e.addEventListener("hashchange",l,!0),l()):i(n),{update:n}}if(t.getElementsByClassName){var g="imageset",m="is-loaded",h="has-error",v=g+" -placeholder",p="is-placeholder-rendered",b="has-placeholder-error",z=g+"-element",A=g+"-placeholder",y="imageset-error",C=t.documentElement,E=navigator.userAgent,x=e.requestAnimationFrame||function(e){setTimeout(e,1e3/60)},w=function(){function e(e){a.push(e),n()}function t(){a.shift()(),a.length?x(t):r=!1}function n(){r||(r=!0,x(t))}var a=[],r=!1;return{add:e}}(),L=function(){return C.classList?function(e,t){return e.classList.contains(t)}:function(e,t){return!!~e.className.split(/\s+/).indexOf(t)}}(),N=function(){return C.classList?function(e,t){e.classList.add(t)}:function(e,t){var n=e.className.split(/\s+/);~n.indexOf(t)||(n.push(t),e.className=n.join(" "))}}();(function(){C.classList})();if("[object OperaMini]"===Object.prototype.toString.call(e.operamini)){e.lazySizesConfig=e.lazySizesConfig||{},e.lazySizesConfig.init=!1,N(C,"operamini");var S=function(t){var n=t.getElementsByTagName("source"),a=t.getElementsByClassName(z)[0];if(N(t,m),e.HTMLPictureElement){for(var r=0,i=n.length;r<i;r++){var o=n[r];o.hasAttribute("data-srcset")&&(o.srcset=o.getAttribute("data-srcset")),o.hasAttribute("data-src")&&(o.src=o.getAttribute("data-src"))}a.hasAttribute("data-srcset")&&(a.srcset=a.getAttribute("data-srcset")),a.hasAttribute("data-src")&&(a.src=a.getAttribute("data-src"))}else{for(var s=n.length>0?n[n.length-1]:a,l=s.getAttribute("data-srcset").split(/,\s+/);n.length>0;)n[0].parentNode.removeChild(n[0]);a.src=l.pop().replace(/\s+\d+[wx]$/,"")}};return void i(function(){for(var e=t.getElementsByClassName(g),n=0,a=e.length;n<a;n++)S(e[n])})}var M=new RegExp("-placeholder:([a-z0-9_-]+)\\s*","i"),B={};if(e.CanvasRenderingContext2D){var O=-1!==E.indexOf("Safari")&&-1===E.indexOf("Chrome");("imageRendering"in C.style||"msInterpolationMode"in C.style)&&!O||(B.mosaic=function(e){var n=t.createElement("canvas"),a=n.getContext("2d"),r=e.getElementsByClassName(A)[0],i=function(){d(n,a);var t=r.naturalWidth,i=r.naturalHeight,o=e.offsetWidth,s=e.offsetWidth/t*i+.5|0;n.width=o,n.height=s,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,a.imageSmoothingEnabled=!1,n.setAttribute("aria-hidden",!0),n.className=r.className,a.drawImage(r,0,0,o,s),r.parentNode.replaceChild(n,r),N(e,p)};return function(){l(r,i,function(){u(e)})}});var R=function(e,n,a,r){var i=e.getElementsByClassName(A)[0],o=function(){var o=i.naturalWidth,s=i.naturalHeight,l=e.offsetWidth,d=e.offsetWidth/o*s+.5|0,c=t.createElement("canvas"),u=c.getContext("2d"),f=L(el,"-alpha");c.width=l,c.height=d,!f&&"mozOpaque"in c&&(c.mozOpaque=!0),c.setAttribute("aria-hidden",!0),c.className=i.className,u.drawImage(i,0,0,l,d),stackBlur[f?"canvasRGBA":"canvasRGB"](c,0,0,l,d,n,a,r),i.parentNode.replaceChild(c,i),N(e,p)};return function(){l(i,o,function(){u(e)})}};B.blurred=function(e){return R(e,15,512,17)},B.lqip=function(e){return R(e,7,512,15)};var W=function(e,t,a){a=!!a;var r=e.getContext("2d"),i=r.getImageData(0,0,e.width,e.height),o=i.data,s=i.width,l=i.height,c=s-1,u=l-1,f=n.round(t*(n.sqrt(3)/2)),g=f/2,m=t/2;d(e,r);var h,v,p,b,z,A,y,C,E,x,w,L,N,S,M,B,O,R=function(e,n,a,i){i=i||!1;var o=e+(i?0:f);r.beginPath(),r.moveTo(o,n+0),r.lineTo(e+(i?f:0),n+m),r.lineTo(o,n+t),r.fill(),r.closePath()},W=function(e,t){var n=t*s*4+4*e;return[o[n],o[n+1],o[n+2],o[n+3]]},I=function(e,t){return o[t*s*4+4*e+3]},T=function(e){for(var t=0,n=0,a=e.length;n<a;n++)t+=I(e[n][0],e[n][1]);return t/a},D=function(e){return"rgb("+e.slice(0,3).join(",")+")"},_=function(e){return e[3]/=255,"rgba("+e.join(",")+")"},P=function(e){return n.max(0,n.min(n.round(e),c))},k=function(e){return n.max(0,n.min(n.round(e),u))},q=n.ceil(s/f)+1,H=n.ceil(l/t)+1;if(a){for(v=0;v<H;v++)for(b=v*t,A=k(b+m),y=b-m,x=k(b),h=0;h<q;h++)p=h*f,S=h%2!=0,P(p),z=k(b),E=P(S?p+f-1:p),C=P(S?p:p+f-1),L=P(p+g),N=k(b+m),M=[[C,z],[E,N],[C,k(b+t-1)],[L,N],[L,N]],B=T(M)+.5|0,r.fillStyle=_([B,0,0,255]),r.fillRect(p,b,f,t),M=[[C,k(b-m)],[E,z],[C,k(b+m-1)],[L,z],[L,z]],B=T(M)+.5|0,r.fillStyle=_([B,0,0,255]),R(p,y,0,S);var F=r.getImageData(0,0,e.width,e.height),$=F.data,j=$.length;for(O=0;O<j;O+=4)$[O+3]=$[O];r.putImageData(F,0,0),r.globalCompositeOperation="source-atop"}for(v=0;v<H;v++)for(b=v*t,A=k(b+m),y=b-m,x=k(b),h=0;h<q;h++)p=h*f,w=P(p+g),S=h%2!=0,r.fillStyle=D(W(w,A)),r.fillRect(p,b,f,t),r.fillStyle=D(W(w,x)),R(p,y,0,S);a&&(r.globalCompositeOperation="source-over")};B.triangles=function(e){var a=e.getElementsByClassName(A)[0],r=function(){var r=a.naturalWidth,i=a.naturalHeight,o=e.offsetWidth,s=n.round(e.offsetWidth/r*i),l=t.createElement("canvas"),d=l.getContext("2d"),c=L(e,"-alpha");l.width=o,l.height=s,!c&&"mozOpaque"in l&&(l.mozOpaque=!0),l.setAttribute("aria-hidden",!0),l.className=a.className,d.drawImage(a,0,0,o,s),W(l,40,c),a.parentNode.replaceChild(l,a),N(e,p),console.log("placeholder rendered")};return function(){l(a,r,function(){u(e)})}}}var I=new f;e.imageset=I}}(window,document,Math,Date),function(e){var t=navigator.userAgent;e.HTMLPictureElement&&/ecko/.test(t)&&t.match(/rv\:(\d+)/)&&RegExp.$1<41&&addEventListener("resize",function(){var t,n=document.createElement("source"),a=function(e){var t,a,r=e.parentNode;"PICTURE"===r.nodeName.toUpperCase()?(t=n.cloneNode(),r.insertBefore(t,r.firstElementChild),setTimeout(function(){r.removeChild(t)})):(!e._pfLastSize||e.offsetWidth>e._pfLastSize)&&(e._pfLastSize=e.offsetWidth,a=e.sizes,e.sizes+=",100vw",setTimeout(function(){e.sizes=a}))},r=function(){var e,t=document.querySelectorAll("picture > img, img[srcset][sizes]");for(e=0;e<t.length;e++)a(t[e])},i=function(){clearTimeout(t),t=setTimeout(r,99)},o=e.matchMedia&&matchMedia("(orientation: landscape)"),s=function(){i(),o&&o.addListener&&o.addListener(i)};return n.srcset="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",/^[c|i]|d$/.test(document.readyState||"")?s():document.addEventListener("DOMContentLoaded",s),i}())}(window),function(e){"use strict";var t,n,a,r;e.addEventListener&&(t=e.lazySizes&&lazySizes.cfg||e.lazySizesConfig||{},n=t.lazyClass||"lazyload",a=function(){var t,a;if("string"==typeof n&&(n=document.getElementsByClassName(n)),e.lazySizes)for(t=0,a=n.length;t<a;t++)lazySizes.loader.unveil(n[t])},addEventListener("beforeprint",a,!1),!("onbeforeprint"in e)&&e.matchMedia&&(r=matchMedia("print"))&&r.addListener&&r.addListener(function(){r.matches&&a()}))}(window),function(e,t){var n=function(e,t){"use strict";if(t.getElementsByClassName){var n,a=t.documentElement,r=e.Date,i=e.HTMLPictureElement,o=e.addEventListener,s=e.setTimeout,l=e.requestAnimationFrame||s,d=e.requestIdleCallback,c=/^picture$/i,u=["load","error","lazyincluded","_lazyloaded"],f={},g=Array.prototype.forEach,m=function(e,t){return f[t]||(f[t]=new RegExp("(\\s|^)"+t+"(\\s|$)")),f[t].test(e.getAttribute("class")||"")&&f[t]},h=function(e,t){m(e,t)||e.setAttribute("class",(e.getAttribute("class")||"").trim()+" "+t)},v=function(e,t){var n;(n=m(e,t))&&e.setAttribute("class",(e.getAttribute("class")||"").replace(n," "))},p=function(e,t,n){var a=n?"addEventListener":"removeEventListener";n&&p(e,t),u.forEach(function(n){e[a](n,t)})},b=function(e,n,a,r,i){var o=t.createEvent("CustomEvent");return o.initCustomEvent(n,!r,!i,a||{}),e.dispatchEvent(o),o},z=function(t,a){var r;!i&&(r=e.picturefill||n.pf)?r({reevaluate:!0,elements:[t]}):a&&a.src&&(t.src=a.src)},A=function(e,t){return(getComputedStyle(e,null)||{})[t]},y=function(e,t,a){for(a=a||e.offsetWidth;a<n.minSize&&t&&!e._lazysizesWidth;)a=t.offsetWidth,t=t.parentNode;return a},C=function(){var e,n,a=[],r=function(){var t;for(e=!0,n=!1;a.length;)t=a.shift(),t[0].apply(t[1],t[2]);e=!1},i=function(i){e?i.apply(this,arguments):(a.push([i,this,arguments]),n||(n=!0,(t.hidden?s:l)(r)))};return i._lsFlush=r,i}(),E=function(e,t){return t?function(){C(e)}:function(){var t=this,n=arguments;C(function(){e.apply(t,n)})}},x=function(e){var t,n=0,a=666,i=function(){t=!1,n=r.now(),e()},o=d?function(){d(i,{timeout:a}),666!==a&&(a=666)}:E(function(){s(i)},!0);return function(e){var i;(e=!0===e)&&(a=44),t||(t=!0,i=125-(r.now()-n),i<0&&(i=0),e||i<9&&d?o():s(o,i))}},w=function(e){var t,n,a=function(){t=null,e()},i=function(){var e=r.now()-n;e<99?s(i,99-e):(d||a)(a)};return function(){n=r.now(),t||(t=s(i,99))}},L=function(){var i,l,d,u,f,y,L,S,M,B,O,R,W,I,T,D=/^img$/i,_=/^iframe$/i,P="onscroll"in e&&!/glebot/.test(navigator.userAgent),k=0,q=0,H=-1,F=function(e){q--,e&&e.target&&p(e.target,F),(!e||q<0||!e.target)&&(q=0)},$=function(e,n){var r,i=e,o="hidden"==A(t.body,"visibility")||"hidden"!=A(e,"visibility");for(M-=n,R+=n,B-=n,O+=n;o&&(i=i.offsetParent)&&i!=t.body&&i!=a;)(o=(A(i,"opacity")||1)>0)&&"visible"!=A(i,"overflow")&&(r=i.getBoundingClientRect(),o=O>r.left&&B<r.right&&R>r.top-1&&M<r.bottom+1);return o},j=function(){var e,r,o,s,c,u,g,m,h;if((f=n.loadMode)&&q<8&&(e=i.length)){r=0,H++,null==I&&("expand"in n||(n.expand=a.clientHeight>500&&a.clientWidth>500?500:370),W=n.expand,I=W*n.expFactor),k<I&&q<1&&H>2&&f>2&&!t.hidden?(k=I,H=0):k=f>1&&H>1&&q<6?W:0;for(;r<e;r++)if(i[r]&&!i[r]._lazyRace)if(P)if((m=i[r].getAttribute("data-expand"))&&(u=1*m)||(u=k),h!==u&&(L=innerWidth+u*T,S=innerHeight+u,g=-1*u,h=u),o=i[r].getBoundingClientRect(),(R=o.bottom)>=g&&(M=o.top)<=S&&(O=o.right)>=g*T&&(B=o.left)<=L&&(R||O||B||M)&&(d&&q<3&&!m&&(f<3||H<4)||$(i[r],u))){if(Y(i[r]),c=!0,q>9)break}else!c&&d&&!s&&q<4&&H<4&&f>2&&(l[0]||n.preloadAfterLoad)&&(l[0]||!m&&(R||O||B||M||"auto"!=i[r].getAttribute(n.sizesAttr)))&&(s=l[0]||i[r]);else Y(i[r]);s&&!c&&Y(s)}},G=x(j),U=function(e){h(e.target,n.loadedClass),v(e.target,n.loadingClass),p(e.target,Q)},K=E(U),Q=function(e){K({target:e.target})},J=function(e,t){try{e.contentWindow.location.replace(t)}catch(n){e.src=t}},V=function(e){var t,a,r=e.getAttribute(n.srcsetAttr);(t=n.customMedia[e.getAttribute("data-media")||e.getAttribute("media")])&&e.setAttribute("media",t),r&&e.setAttribute("srcset",r),t&&(a=e.parentNode,a.insertBefore(e.cloneNode(),e),a.removeChild(e))},X=E(function(e,t,a,r,i){var o,l,d,f,m,A;(m=b(e,"lazybeforeunveil",t)).defaultPrevented||(r&&(a?h(e,n.autosizesClass):e.setAttribute("sizes",r)),l=e.getAttribute(n.srcsetAttr),o=e.getAttribute(n.srcAttr),i&&(d=e.parentNode,f=d&&c.test(d.nodeName||"")),A=t.firesLoad||"src"in e&&(l||o||f),m={target:e},A&&(p(e,F,!0),clearTimeout(u),u=s(F,2500),h(e,n.loadingClass),p(e,Q,!0)),f&&g.call(d.getElementsByTagName("source"),V),l?e.setAttribute("srcset",l):o&&!f&&(_.test(e.nodeName)?J(e,o):e.src=o),(l||f)&&z(e,{src:o})),C(function(){e._lazyRace&&delete e._lazyRace,v(e,n.lazyClass),A&&!e.complete||(A?F(m):q--,U(m))})}),Y=function(e){var t,a=D.test(e.nodeName),r=a&&(e.getAttribute(n.sizesAttr)||e.getAttribute("sizes")),i="auto"==r;(!i&&d||!a||!e.src&&!e.srcset||e.complete||m(e,n.errorClass))&&(t=b(e,"lazyunveilread").detail,i&&N.updateElem(e,!0,e.offsetWidth),e._lazyRace=!0,q++,X(e,t,i,r,a))},Z=function(){if(!d){if(r.now()-y<999)return void s(Z,999);var e=w(function(){n.loadMode=3,G()});d=!0,n.loadMode=3,G(),o("scroll",function(){3==n.loadMode&&(n.loadMode=2),e()},!0)}};return{_:function(){y=r.now(),i=t.getElementsByClassName(n.lazyClass),l=t.getElementsByClassName(n.lazyClass+" "+n.preloadClass),T=n.hFac,o("scroll",G,!0),o("resize",G,!0),e.MutationObserver?new MutationObserver(G).observe(a,{childList:!0,subtree:!0,attributes:!0}):(a.addEventListener("DOMNodeInserted",G,!0),a.addEventListener("DOMAttrModified",G,!0),setInterval(G,999)),o("hashchange",G,!0),["focus","mouseover","click","load","transitionend","animationend","webkitAnimationEnd"].forEach(function(e){t.addEventListener(e,G,!0)}),/d$|^c/.test(t.readyState)?Z():(o("load",Z),t.addEventListener("DOMContentLoaded",G),s(Z,2e4)),i.length?j():G()},checkElems:G,unveil:Y}}(),N=function(){var e,a=E(function(e,t,n,a){var r,i,o;if(e._lazysizesWidth=a,a+="px",e.setAttribute("sizes",a),c.test(t.nodeName||""))for(r=t.getElementsByTagName("source"),i=0,o=r.length;i<o;i++)r[i].setAttribute("sizes",a);n.detail.dataAttr||z(e,n.detail)}),r=function(e,t,n){var r,i=e.parentNode;i&&(n=y(e,i,n),r=b(e,"lazybeforesizes",{width:n,dataAttr:!!t}),r.defaultPrevented||(n=r.detail.width)&&n!==e._lazysizesWidth&&a(e,i,r,n))},i=function(){var t,n=e.length;if(n)for(t=0;t<n;t++)r(e[t])},s=w(i);return{_:function(){e=t.getElementsByClassName(n.autosizesClass),o("resize",s)},checkElems:s,updateElem:r}}(),S=function(){S.i||(S.i=!0,N._(),L._())};return function(){var t,a={lazyClass:"lazyload",loadedClass:"lazyloaded",loadingClass:"lazyloading",preloadClass:"lazypreload",errorClass:"lazyerror",autosizesClass:"lazyautosizes",srcAttr:"data-src",srcsetAttr:"data-srcset",sizesAttr:"data-sizes",minSize:40,customMedia:{},init:!0,expFactor:1.5,hFac:.8,loadMode:2};n=e.lazySizesConfig||e.lazysizesConfig||{};for(t in a)t in n||(n[t]=a[t]);e.lazySizesConfig=n,s(function(){n.init&&S()})}(),{cfg:n,autoSizer:N,loader:L,init:S,uP:z,aC:h,rC:v,hC:m,fire:b,gW:y,rAF:C}}}(e,e.document);e.lazySizes=n,"object"==typeof module&&module.exports&&(module.exports=n)}(window);